<Window x:Class="PomodoroForObsidian.MiniWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False"
        Topmost="True"
        Width="340" Height="36"
        MinWidth="220" MinHeight="36"
        WindowStartupLocation="Manual"
        Title="Mini Pomodoro">
    <Window.Resources>
        <!-- Style for square buttons -->
        <Style x:Key="SquareButtonStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Style for square textbox -->
        <Style x:Key="SquareTextBoxStyle" TargetType="TextBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                          Focusable="False" 
                                          HorizontalScrollBarVisibility="Hidden" 
                                          VerticalScrollBarVisibility="Hidden"
                                          Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Border CornerRadius="0" Background="#1a1523" BorderBrush="#a06fc6" BorderThickness="2" Padding="0" MouseLeftButtonDown="Border_MouseLeftButtonDown">
            <Grid Margin="4,0,4,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBox x:Name="MiniTaskInput" Grid.Column="0" Height="22" Margin="4,0,4,0" 
                         VerticalContentAlignment="Center" FontSize="11" 
                         Background="#2d223a" Foreground="White" 
                         BorderBrush="#a06fc6" BorderThickness="1" 
                         Padding="4,0" ToolTip="What are you working on?" 
                         MinWidth="60" MouseDoubleClick="MiniTaskInput_MouseDoubleClick" 
                         TextChanged="MiniTaskInput_TextChanged" KeyDown="MiniTaskInput_KeyDown"
                         Style="{StaticResource SquareTextBoxStyle}" />
                <TextBlock x:Name="MiniTimerText" Grid.Column="1" Text="25:00" 
                           Foreground="White" FontSize="14" FontWeight="Bold" 
                           VerticalAlignment="Center" HorizontalAlignment="Center" 
                           Width="50" Height="22" Margin="4,0,4,0" />
                <Button x:Name="MiniStartStopButton" Grid.Column="2" Content="â–¶" 
                        Width="22" Height="22" 
                        Background="#d18be9" Foreground="White" 
                        FontSize="13" FontWeight="Bold" 
                        BorderBrush="#d18be9" BorderThickness="0" 
                        Cursor="Hand" VerticalAlignment="Center" 
                        Margin="4,0,4,0" 
                        Style="{StaticResource SquareButtonStyle}" />
            </Grid>
                </Border>
        
                <Popup x:Name="AutoCompletePopup" IsOpen="False" StaysOpen="False" PlacementTarget="{Binding ElementName=MiniTaskInput}" Placement="Bottom">
                    <ListBox x:Name="AutoCompleteListBox" KeyDown="AutoCompleteListBox_KeyDown" MouseDoubleClick="AutoCompleteListBox_MouseDoubleClick" />
                </Popup>
        
                <!-- Edge resize handles -->        <Border x:Name="ResizeHandleLeft" Width="6" HorizontalAlignment="Left" VerticalAlignment="Stretch" Background="Transparent" Cursor="SizeWE" MouseDown="ResizeLeft_MouseDown" />
        <Border x:Name="ResizeHandleRight" Width="6" HorizontalAlignment="Right" VerticalAlignment="Stretch" Background="Transparent" Cursor="SizeWE" MouseDown="ResizeRight_MouseDown" />
        <Border x:Name="ResizeHandleTop" Height="6" VerticalAlignment="Top" HorizontalAlignment="Stretch" Background="Transparent" Cursor="SizeNS" MouseDown="ResizeTop_MouseDown" />
        <Border x:Name="ResizeHandleBottom" Height="6" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Background="Transparent" Cursor="SizeNS" MouseDown="ResizeBottom_MouseDown" />
        
        <!-- Corner resize handles -->
        <Border x:Name="ResizeHandleTopLeft" Width="6" Height="6" HorizontalAlignment="Left" VerticalAlignment="Top" Background="Transparent" Cursor="SizeNWSE" MouseDown="ResizeTopLeft_MouseDown" />
        <Border x:Name="ResizeHandleTopRight" Width="6" Height="6" HorizontalAlignment="Right" VerticalAlignment="Top" Background="Transparent" Cursor="SizeNESW" MouseDown="ResizeTopRight_MouseDown" />
        <Border x:Name="ResizeHandleBottomLeft" Width="6" Height="6" HorizontalAlignment="Left" VerticalAlignment="Bottom" Background="Transparent" Cursor="SizeNESW" MouseDown="ResizeBottomLeft_MouseDown" />
        <Border x:Name="ResizeHandleBottomRight" Width="6" Height="6" HorizontalAlignment="Right" VerticalAlignment="Bottom" Background="Transparent" Cursor="SizeNWSE" MouseDown="ResizeBottomRight_MouseDown" />
    </Grid>
</Window>
